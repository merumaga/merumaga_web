<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>expa</title>
  <link rel="stylesheet" href="css/style.css" type="text/css">
</head>

<body>
  <h1></h1>

  <div id="wrapper">
    <div class="li">

    </div>
    <div class="contents">

        <table>
          <tbody class="con_tr">
          </tbody>
          <tbody class="con_tr2">
          </tbody>
          <tbody class="con_tr3">
          </tbody>
          <tbody class="con_tr4">
          </tbody>
        </table>

    </div>
  </div>
  <div class="next"></div>
  <script src="js/ajax.js"></script>


  <script>
    $(function() {


      $.ajax({
        url: "http://range-ex.com/bkn2359/0008/",
        type: 'GET',
        success: function(data) {
          var mal_p = 0;
          $('.li').html($(data).find('.pagination > li'));
          mal_p = (".li > li").length / 2 - 1;
          $('.con_tr').html($(data).find('tbody > tr'));
          $("h1").html($(data).find("header > h1"));
          var count = 1;
          $(".next").click(function() {
            count += 1
            if (count <= mal_p) {
              console.log(count);
              if (count === mal_p) {
                $(".next").css("display", "none");
              }
              $.ajax({
                url: "http://range-ex.com/bkn2359/0008/page:" + count,
                type: "GET",
                success: function(data) {
                  $(".con_tr" + count).html($(data).find("tbody > tr"))
                }
              });

            }



          });



          $("td > a").click(function(e) {
            e.preventDefault();
            var url = "http://range-ex.com"+$(this).attr('href');
            console.log(url); //hoge.html
            window.localStorage.setItem("result", url);
            window.location.href = "page.html";

          });


        },

        error: function() {
          $('con_tr').html('ファイルを読み込めませんでした。');
        },
        complete: function() {}

      });


    });
  </script>
</body>

</html>
